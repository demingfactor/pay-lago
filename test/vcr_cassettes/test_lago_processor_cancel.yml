---
http_interactions:
- request:
    method: get
    uri: http://localhost:3000/api/v1/customers/gid:%2F%2Fdummy%2FPay::Customer%2F772847388
    body:
      encoding: UTF-8
      string: ''
    headers:
      Authorization:
      - Bearer 155ed033-8716-4587-9ac6-fed8ddae3317
      Content-Type:
      - application/json
      User-Agent:
      - Lago Ruby v0.44.0-beta
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - '0'
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"d1b3aad578ce53dadbecc5fe652dfdb0"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - b3228143-c468-4540-b7bb-63d3a4c825db
      X-Runtime:
      - '0.007753'
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"customer":{"lago_id":"c8bb805a-590c-444f-ae14-66589764f273","external_id":"gid://dummy/Pay::Customer/772847388","name":"Lago
        User","sequential_id":4,"slug":"AMO-FBCD-004","created_at":"2023-09-18T06:42:57Z","updated_at":"2023-09-25T02:50:02Z","country":"US","address_line1":null,"address_line2":null,"state":null,"zipcode":null,"email":"test@example.com","city":null,"url":null,"phone":null,"logo_url":null,"legal_name":null,"legal_number":null,"currency":"USD","tax_identification_number":null,"timezone":null,"applicable_timezone":"UTC","net_payment_term":null,"external_salesforce_id":null,"billing_configuration":{"invoice_grace_period":null,"payment_provider":"stripe","vat_rate":null,"document_locale":null,"provider_customer_id":"test_100","provider_payment_methods":["card"],"sync_with_provider":null},"metadata":[],"taxes":[]}}'
  recorded_at: Mon, 25 Sep 2023 07:11:03 GMT
- request:
    method: post
    uri: http://localhost:3000/api/v1/subscriptions
    body:
      encoding: UTF-8
      string: '{"subscription":{"external_customer_id":"gid://dummy/Pay::Customer/772847388","plan_code":"default","name":"default","external_id":"gid://dummy/Pay::Subscription/913727099"}}'
    headers:
      Authorization:
      - Bearer 155ed033-8716-4587-9ac6-fed8ddae3317
      Content-Type:
      - application/json
      User-Agent:
      - Lago Ruby v0.44.0-beta
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - '0'
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"beb951ac67e12ebcc3f8e70370deda81"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 49f40ea1-bef7-4867-8861-c3d3b10e4eed
      X-Runtime:
      - 0.016995
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"subscription":{"lago_id":"3b678743-53d9-47c8-bf4b-e6f025d60b12","external_id":"gid://dummy/Pay::Subscription/913727099","lago_customer_id":"c8bb805a-590c-444f-ae14-66589764f273","external_customer_id":"gid://dummy/Pay::Customer/772847388","name":"default","plan_code":"default","status":"active","billing_time":"calendar","subscription_at":"2023-09-22T04:39:18Z","started_at":"2023-09-22T04:39:18Z","terminated_at":null,"canceled_at":null,"created_at":"2023-09-22T04:39:18Z","previous_plan_code":null,"next_plan_code":null,"downgrade_plan_date":null,"subscription_date":"2023-09-22"}}'
  recorded_at: Mon, 25 Sep 2023 07:11:03 GMT
- request:
    method: get
    uri: http://localhost:3000/api/v1/subscriptions?external_customer_id=gid://dummy/Pay::Customer/772847388&per_page=9223372036854775807
    body:
      encoding: UTF-8
      string: ''
    headers:
      Authorization:
      - Bearer 155ed033-8716-4587-9ac6-fed8ddae3317
      Content-Type:
      - application/json
      User-Agent:
      - Lago Ruby v0.44.0-beta
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - '0'
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"3c80e8f22c6af797e60842ef88ceb5d4"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 9b94b0cf-e2df-4606-a96f-7a634225e087
      X-Runtime:
      - '0.023287'
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"subscriptions":[{"lago_id":"e462a9b8-caf3-4429-9465-fa2979fde0c1","external_id":"d7d12eca-414d-42e3-9882-e1e420e7b3b3","lago_customer_id":"c8bb805a-590c-444f-ae14-66589764f273","external_customer_id":"gid://dummy/Pay::Customer/772847388","name":"","plan_code":"default","status":"active","billing_time":"anniversary","subscription_at":"2023-09-20T00:00:00Z","started_at":"2023-09-20T00:00:00Z","terminated_at":null,"canceled_at":null,"created_at":"2023-09-22T05:24:08Z","previous_plan_code":null,"next_plan_code":null,"downgrade_plan_date":null,"subscription_date":"2023-09-20"},{"lago_id":"e59ee63a-eb47-4c55-8678-9534bd839ce3","external_id":"8f3c5594-ecc5-4d26-8b03-2b7eaa14043d","lago_customer_id":"c8bb805a-590c-444f-ae14-66589764f273","external_customer_id":"gid://dummy/Pay::Customer/772847388","name":"","plan_code":"another_plan","status":"active","billing_time":"calendar","subscription_at":"2023-09-20T06:48:50Z","started_at":"2023-09-20T06:48:50Z","terminated_at":null,"canceled_at":null,"created_at":"2023-09-20T06:49:08Z","previous_plan_code":null,"next_plan_code":null,"downgrade_plan_date":null,"subscription_date":"2023-09-20"},{"lago_id":"7704d037-1e78-4e5e-8a4c-d84bd970c2d0","external_id":"0838e622-192e-46ef-ade7-204246b29143","lago_customer_id":"c8bb805a-590c-444f-ae14-66589764f273","external_customer_id":"gid://dummy/Pay::Customer/772847388","name":"","plan_code":"default","status":"active","billing_time":"calendar","subscription_at":"2023-09-21T02:03:48Z","started_at":"2023-09-21T02:03:48Z","terminated_at":null,"canceled_at":null,"created_at":"2023-09-21T02:03:58Z","previous_plan_code":null,"next_plan_code":null,"downgrade_plan_date":null,"subscription_date":"2023-09-21"},{"lago_id":"3b678743-53d9-47c8-bf4b-e6f025d60b12","external_id":"gid://dummy/Pay::Subscription/913727099","lago_customer_id":"c8bb805a-590c-444f-ae14-66589764f273","external_customer_id":"gid://dummy/Pay::Customer/772847388","name":"default","plan_code":"default","status":"active","billing_time":"calendar","subscription_at":"2023-09-22T04:39:18Z","started_at":"2023-09-22T04:39:18Z","terminated_at":null,"canceled_at":null,"created_at":"2023-09-22T04:39:18Z","previous_plan_code":null,"next_plan_code":null,"downgrade_plan_date":null,"subscription_date":"2023-09-22"},{"lago_id":"0ebd994b-a5e6-42df-ad0d-466eaf6961bf","external_id":"3bacb47e-2387-4a25-8a41-a59403307543","lago_customer_id":"c8bb805a-590c-444f-ae14-66589764f273","external_customer_id":"gid://dummy/Pay::Customer/772847388","name":"","plan_code":"another_plan","status":"active","billing_time":"anniversary","subscription_at":"2023-09-22T05:23:25Z","started_at":"2023-09-22T05:23:25Z","terminated_at":null,"canceled_at":null,"created_at":"2023-09-22T05:23:31Z","previous_plan_code":null,"next_plan_code":null,"downgrade_plan_date":null,"subscription_date":"2023-09-22"},{"lago_id":"904bf771-888e-4246-a3c7-15da94ffa4cd","external_id":"afad9669-a42a-446b-bc16-a60bf3eea2c3","lago_customer_id":"c8bb805a-590c-444f-ae14-66589764f273","external_customer_id":"gid://dummy/Pay::Customer/772847388","name":"","plan_code":"default","status":"active","billing_time":"anniversary","subscription_at":"2023-08-22T00:00:00Z","started_at":"2023-09-22T05:25:15Z","terminated_at":null,"canceled_at":null,"created_at":"2023-09-22T05:25:15Z","previous_plan_code":"another_plan","next_plan_code":null,"downgrade_plan_date":null,"subscription_date":"2023-08-22"}],"meta":{"current_page":1,"next_page":null,"prev_page":null,"total_pages":1,"total_count":6}}'
  recorded_at: Mon, 25 Sep 2023 07:11:03 GMT
- request:
    method: delete
    uri: http://localhost:3000/api/v1/subscriptions/gid:%2F%2Fdummy%2FPay::Subscription%2F913727099
    body:
      encoding: UTF-8
      string: ''
    headers:
      Authorization:
      - Bearer 155ed033-8716-4587-9ac6-fed8ddae3317
      Content-Type:
      - application/json
      User-Agent:
      - Lago Ruby v0.44.0-beta
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      X-Frame-Options:
      - SAMEORIGIN
      X-Xss-Protection:
      - '0'
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Permitted-Cross-Domain-Policies:
      - none
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Content-Type:
      - application/json; charset=utf-8
      Etag:
      - W/"c518f7694e89e2f2cdab3c5c115eaf07"
      Cache-Control:
      - max-age=0, private, must-revalidate
      X-Request-Id:
      - 4550ab48-9f03-4f22-b33c-f0e33970fb48
      X-Runtime:
      - '0.035522'
      Vary:
      - Origin
      Transfer-Encoding:
      - chunked
    body:
      encoding: UTF-8
      string: '{"subscription":{"lago_id":"3b678743-53d9-47c8-bf4b-e6f025d60b12","external_id":"gid://dummy/Pay::Subscription/913727099","lago_customer_id":"c8bb805a-590c-444f-ae14-66589764f273","external_customer_id":"gid://dummy/Pay::Customer/772847388","name":"default","plan_code":"default","status":"terminated","billing_time":"calendar","subscription_at":"2023-09-22T04:39:18Z","started_at":"2023-09-22T04:39:18Z","terminated_at":"2023-09-25T07:11:03Z","canceled_at":null,"created_at":"2023-09-22T04:39:18Z","previous_plan_code":null,"next_plan_code":null,"downgrade_plan_date":null,"subscription_date":"2023-09-22"}}'
  recorded_at: Mon, 25 Sep 2023 07:11:03 GMT
recorded_with: VCR 6.2.0
